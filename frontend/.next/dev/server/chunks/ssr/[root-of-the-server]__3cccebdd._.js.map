{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/geek/Documents/Projects/Laravel/order-management-system/frontend/app/order/page.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport ProductList from '../components/ProductList';\nimport OrderSummary from '../components/OrderSummary';\nimport OrdersList from '../components/OrdersList';\n\nexport default function Home() {\n  const [products, setProducts] = useState([]);\n  const [loadingProducts, setLoadingProducts] = useState(true);\n  const [orderItems, setOrderItems] = useState([]);\n  const [orders, setOrders] = useState([]);\n\n  useEffect(() => {\n    fetchProducts();\n    fetchOrders();\n  }, []);\n\n  const fetchProducts = async () => {\n    try {\n      const response = await fetch('http://oms-backend.test/api/products');\n      if (response.ok) {\n        const data = await response.json();\n        setProducts(data);\n      } else {\n        console.error('Failed to fetch products');\n      }\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    } finally {\n      setLoadingProducts(false);\n    }\n  };\n\n  const fetchOrders = async () => {\n    try {\n      const response = await fetch('http://oms-backend.test/api/orders');\n      if (response.ok) {\n        const data = await response.json();\n        setOrders(data);\n      }\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n    }\n  };\n\n  const handleAddToOrder = (product, quantity) => {\n    const newItem = {\n      product_id: product.id,\n      unit_price: product.price,\n      quantity: quantity,\n    };\n    setOrderItems([...orderItems, newItem]);\n  };\n\n  const handleRemoveItem = (index) => {\n    const updatedItems = orderItems.filter((_, i) => i !== index);\n    setOrderItems(updatedItems);\n  };\n\n  const handleConfirmOrder = async () => {\n    if (orderItems.length === 0) return;\n\n    const totalAmount = orderItems.reduce((sum, item) => sum + item.unit_price * item.quantity, 0);\n    const orderPayload = {\n      total_amount: totalAmount,\n      status: 'confirmed',\n      items: orderItems,\n    };\n\n    try {\n      const response = await fetch('http://oms-backend.test/api/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(orderPayload),\n      });\n\n      if (response.ok) {\n        alert('Order created successfully!');\n        setOrderItems([]);\n        fetchOrders(); // Refresh orders list\n        fetchProducts(); // Refresh products to update inventory\n      } else {\n        alert('Failed to create order');\n      }\n    } catch (error) {\n      console.error('Error creating order:', error);\n      alert('Error creating order');\n    }\n  };\n\n  const handleCancelOrder = async (orderId) => {\n    try {\n      const response = await fetch(`http://oms-backend.test/api/orders/${orderId}/cancel`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ status: 'cancelled' }),\n      });\n\n      if (response.ok) {\n        alert('Order cancelled successfully!');\n        fetchOrders(); // Refresh orders list\n        fetchProducts(); // Refresh products to update inventory\n      } else {\n        alert('Failed to cancel order');\n      }\n    } catch (error) {\n      console.error('Error cancelling order:', error);\n      alert('Error cancelling order');\n    }\n  };\n\n  const handleCancelCurrentOrder = () => {\n    setOrderItems([]);\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-8\">Order Management System</h1>\n      \n      <h2 className=\"text-2xl font-semibold mb-4\">Products</h2>\n      {loadingProducts ? (\n        <p>Loading products...</p>\n      ) : (\n        <ProductList products={products} onAddToOrder={handleAddToOrder} />\n      )}\n      \n      <OrderSummary \n        orderItems={orderItems} \n        onRemoveItem={handleRemoveItem} \n        onCancelOrder={handleCancelCurrentOrder} \n        onConfirmOrder={handleConfirmOrder} \n      />\n      \n      <OrdersList orders={orders} onCancelOrder={handleCancelOrder} />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}